
<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    
    <title>Célestin l'Approximateur v2.5</title>
    
    <!-- React & DOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=VT323&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00ffff;
            --win-grey: #c0c0c0;
            --win-blue: #000080;
            --deep-void: #0a0a0a;
            --text-main: #e0e0e0;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--deep-void);
            font-family: 'Space Mono', monospace;
            overflow: hidden;
            height: 100vh;
            color: var(--text-main);
            /* CORRECTION : Encodage des balises SVG (< devient %3C, > devient %3E) pour éviter l'erreur de parsing Thymeleaf */
            cursor: url('data:image/svg+xml;utf8,%3Csvg id="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"%3E%3Cpath fill="%2300ffff" d="M0,0 L0,24 L6,18 L12,32 L16,30 L10,16 L20,16 Z" style="stroke: black; stroke-width: 1px;"/%3E%3C/svg%3E'), auto;
        }

        /* CRT Effect */
        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 999;
            animation: scrollLines 10s linear infinite;
        }
        .vignette {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.6) 100%);
            pointer-events: none;
            z-index: 999;
        }

        @keyframes scrollLines {
            0% { background-position: 0 0; }
            100% { background-position: 0 4px; }
        }

        /* Glitch Animations */
        @keyframes glitch-skew {
            0% { transform: skew(0deg); }
            20% { transform: skew(-2deg); }
            40% { transform: skew(2deg); }
            60% { transform: skew(-1deg); }
            80% { transform: skew(1deg); }
            100% { transform: skew(0deg); }
        }

        .glitch-wrapper {
            position: relative;
        }
        
        .glitch-active {
            animation: glitch-skew 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
            filter: hue-rotate(90deg);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: var(--win-grey); border-left: 2px solid #fff; }
        ::-webkit-scrollbar-thumb { 
            background: var(--win-grey); 
            border-top: 2px solid #fff; border-left: 2px solid #fff;
            border-right: 2px solid #000; border-bottom: 2px solid #000;
            box-shadow: inset 1px 1px 0 #dfdfdf, inset -1px -1px 0 #808080;
        }

        /* Windows 95 Aesthetic */
        .win95-box {
            background: var(--win-grey);
            border-top: 2px solid #fff; border-left: 2px solid #fff;
            border-right: 2px solid #000; border-bottom: 2px solid #000;
            box-shadow: 1px 1px 0 #000;
        }
        
        .win95-header {
            background: linear-gradient(90deg, var(--win-blue), #1084d0);
            color: white;
            padding: 4px 8px;
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .win95-btn {
            background: var(--win-grey);
            border-top: 1px solid #fff; border-left: 1px solid #fff;
            border-right: 1px solid #000; border-bottom: 1px solid #000;
            padding: 2px 6px;
            font-family: sans-serif;
            font-size: 12px;
            color: black;
            cursor: pointer;
            box-shadow: inset 1px 1px 0 #dfdfdf;
        }
        .win95-btn:active {
            border-top: 1px solid #000; border-left: 1px solid #000;
            border-right: 1px solid #fff; border-bottom: 1px solid #fff;
            transform: translateY(1px);
        }

        /* Chat Specifics */
        .celestin-font { font-family: 'Cinzel', serif; }
        .user-font { font-family: 'Space Mono', monospace; }

        .shutter-shades {
            position: absolute;
            top: 38%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-2deg);
            width: 70%;
            height: auto;
            z-index: 10;
            pointer-events: none;
            filter: drop-shadow(0 0 5px var(--neon-pink));
        }

        .statue-img {
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .turn-back {
            transform: scaleX(-1) translateX(10px);
            filter: grayscale(100%) contrast(150%) brightness(0.8);
        }

        .typing-dots::after {
            content: ' .';
            animation: dots 1s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { color: rgba(0,0,0,0); text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0);}
            40% { color: var(--neon-cyan); text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0);}
            60% { text-shadow: .25em 0 0 var(--neon-cyan), .5em 0 0 rgba(0,0,0,0);}
            80%, 100% { text-shadow: .25em 0 0 var(--neon-cyan), .5em 0 0 var(--neon-cyan);}
        }

        /* Background Glitch Canvas */
        #bg-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.6;
        }
    </style>
</head>
<body>

    <div class="scanlines"></div>
    <div class="vignette"></div>
    <div id="root"></div>

    <!-- IMPORTANT : th:inline="none" empêche Thymeleaf de parser le JSX comme du HTML -->
    <script type="text/babel" src="/js/main.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</body>